# 文件接口

## 上传文件

通过此接口，用户可进行文件上传操作，该操作用于创建实例时，存在“文件型”、“图片型”、“视频型”、“音频型”元素，需进行上传，可进行单个/批量上传。 

`注意：`
> 1. 单个文件上传，不能超过50M；上传文件数量取决于元数据模板中实体元素设定，最大设定不超过50个。 
> 2. 可上传格式如下： 
>    - 文件型：doc;docx;xps;dot（word）、xls;xlsx;xlsb;xlsm;csv（excel）、pdf、zip；rar（压缩包）
>    - 音频型：wav;mp3;mp4 
>    - 视频型：avi;mov;wmv;flv;mp4  
>    - 图片型：jpg;jpe;png;jpeg;gif;tif;tiff;jxr;bmp

### 请求参数

- 请求服务：企业节点业务系统HTTP端口（默认 3000）
- 请求方式：POST
- 请求路径：`/api/v1/doip/file-upload`
- Header：

| **参数** | **类型** | **是否必填** | **最大长度** | **备注**                      | **示例值** |
| -------------- | -------------- | ------------------ | ------------------ | ----------------------------------- | ---------------- |
| Authorization  | String         | 是                 | -                  | Bearer + 空格 + token(身份接口获取) | admin            |
| Content-Type   | String         | 是                 | -                  | application/json                    | application/json |

- Body：

| **参数** | **类型** | **是否必填** | **最大长度** | **备注** | **示例值**   |
| -------------- | -------------- | ------------------ | ------------------ | -------------- | ------------------ |
| handleName     | String         | 否                 | -                  | 标识           | 88.608.6688/Meta_1 |
| metaHandle     | String         | 是                 | -                  | 元数据         | 88.608.6688/Meta_1 |
| fileField      | String         | 是                 | -                  | 文件属性       | 88.608.6688/Meta   |
| file           | MultipartFile  | 是                 | -                  | 上传的文件     |                    |

### 请求示例

> /api/v1/doip/file-upload?handleName=&metaHandle=88.608.8889/META_filetest&fileField=file
> ![img.png](./images/img.png)

### 响应参数

| **参数** | **类型** | **备注**          | **示例值**                        |
| -------------- | -------------- | ----------------------- | --------------------------------------- |
| status         | Integer        | 状态码(详见状态码说明） | 1                                       |
| message        | String         | 状态码描述              | success                                 |
| data           | Object         | 返回数据                |                                         |
| data.id        | String         | 文件id                  | 664da3c5802cf826c367b8c4                |
| data.filePath  | String         | 文件路径                | 173b5de7-1454-4489-b921-dd6f2fd6d938.md |

### 响应示例

```json
{
  "code": 1,
  "message": "成功",
  "data": {
    "id": "664da3c5802cf826c367b8c4",
    "filePath": "173b5de7-1454-4489-b921-dd6f2fd6d938.md"
  }
}
```

### 异常示例

```json
{
  "message": "非本企业标识",
  "code": 701
}
```

## 文件下载

通过此接口，用户可进行文件上传操作，该操作用于查询或实例时，存在“文件型”、“图片型”、“视频型”、“音频型”元素信息，提供用户进行下载。

### 请求参数

- 请求服务：企业节点业务系统HTTP端口（默认 3000）
- 请求方式：GET
- 请求路径：`/api/v1/doip/file-acquire`
- Header：

| **参数** | **类型** | **是否必填** | **最大长度** | **备注**                      | **示例值** |
| -------------- | -------------- | ------------------ | ------------------ | ----------------------------------- | ---------------- |
| Authorization  | String         | 是                 | -                  | Bearer + 空格 + token(身份接口获取) | admin            |
| Content-Type   | String         | 是                 | -                  | application/json                    | application/json |

- Body：

| **参数** | **类型** | **是否必填** | **最大长度** | **备注** | **示例值**                        |
| -------------- | -------------- | ------------------ | ------------------ | -------------- | --------------------------------------- |
| filePath       | String         | 是                 | -                  | 文件路径       | 173b5de7-1454-4489-b921-dd6f2fd6d938.md |
| handle       | String         | 是                 | -                  | 标识       |  |
| field       | String         | 是                 | -                  | 下载文件对应的字段英文名称       |  |


### 请求示例

> /api/v1/doip/file-acquire?filePath=173b5de7-1454-4489-b921-dd6f2fd6d938.md&handle=88.608.24071101/sjjtest1028-2&field=en1

### 响应参数

无

### 响应示例

无

### 异常示例

```json
{
  "message": "非本企业标识",
  "code": 701
}
```

### 注意

> 1. 该接口下载的文件以流的形式返回，需要通过代码处理流来接收
